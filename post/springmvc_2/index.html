<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SpringMVC_2 å“åº”æ•°æ®ã€æ–‡ä»¶ä¸Šä¼ ã€å¼‚å¸¸å¤„ç†ã€æ‹¦æˆªå™¨ | æ¸…æ±¤ç‰›è‚‰é”…</title>
<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°
" />
<link rel="shortcut icon" href="https://ArtZoick.github.io//favicon.ico?v=1564563259854">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://ArtZoick.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-143265163-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-143265163-1');
</script>


  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://ArtZoick.github.io/">
  <img class="avatar" src="https://ArtZoick.github.io//images/avatar.png?v=1564563259854" alt="">
  </a>
  <h1 class="site-title">
    æ¸…æ±¤ç‰›è‚‰é”…
  </h1>
  <p class="site-description">
    æ¸©æ•…è€ŒçŸ¥æ–°

  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
      
        <a href="/post/beef" class="menu">
          ç‰›è‚‰é”…
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              SpringMVC_2 å“åº”æ•°æ®ã€æ–‡ä»¶ä¸Šä¼ ã€å¼‚å¸¸å¤„ç†ã€æ‹¦æˆªå™¨
            </h2>
            <div class="post-info">
              <span>
                2019-07-26
              </span>
              <span>
                5 min read
              </span>
              
                <a href="https://ArtZoick.github.io//tag/springmvc" class="post-tag">
                  # SpringMVC
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="ä¸€-å“åº”æ•°æ®å’Œç»“æœè§†å›¾">ä¸€ã€å“åº”æ•°æ®å’Œç»“æœè§†å›¾</h2>
<h3 id="1-è¿”å›å€¼åˆ†ç±»">1ã€è¿”å›å€¼åˆ†ç±»</h3>
<h4 id="1è¿”å›å­—ç¬¦ä¸²">(1)è¿”å›å­—ç¬¦ä¸²</h4>
<p>Controlleræ–¹æ³•è¿”å›å­—ç¬¦ä¸²å¯ä»¥æŒ‡å®šé€»è¾‘è§†å›¾çš„åç§°ï¼Œæ ¹æ®<strong>è§†å›¾è§£æå™¨</strong>è§£æä¸ºç‰©ç†è§†å›¾çš„åœ°å€ã€‚</p>
<pre><code class="language-java">@RequestMapping(value = &quot;/hello&quot;)
    public String sayHello() {
        System.out.println(&quot;Hello SpringMVC!!&quot;);
        // è·³è½¬åˆ°XXé¡µé¢
        return &quot;success&quot;;
    }
</code></pre>
<p>å…·ä½“çš„åº”ç”¨åœºæ™¯</p>
<pre><code class="language-java"> /**
     * è¿”å›å€¼æ˜¯String
     *
     * @param model
     * @return
     */
    @RequestMapping(&quot;/testString&quot;)
    public String testString(Model model) {
        System.out.println(&quot;testStringæ–¹æ³•æ‰§è¡Œäº†&quot;);
        //æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢å‡ºäº†Userå¯¹è±¡
        User user = new User();
        user.setUsername(&quot;å½­äºæ™&quot;);
        user.setPassword(&quot;123&quot;);
        user.setAge(20);

        //modelå¯¹è±¡ addAttributeç¬¬ä¸€ä¸ªå‚æ•°æ˜¯keyå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯userå¯¹è±¡
        model.addAttribute(&quot;user&quot;, user);

        return &quot;success&quot;;
    }
</code></pre>
<pre><code class="language-jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isELIgnored=&quot;false&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h3&gt;æ‰§è¡ŒæˆåŠŸ&lt;/h3&gt;
${user.username}
${user.password}
&lt;/body&gt;
&lt;/html&gt;

</code></pre>
<p><strong>æ³¨æ„ç‚¹:</strong><br>
å¯å°†æ•°æ®å­˜å‚¨åˆ°modelå¯¹è±¡ä¸­ï¼Œç„¶ååœ¨success.jspä¸­ç”¨${user.username}å°†å±æ€§å–å‡ºæ¥</p>
<h4 id="2è¿”å›å€¼æ˜¯void">(2)è¿”å›å€¼æ˜¯void</h4>
<p>å¦‚æœæ§åˆ¶å™¨çš„æ–¹æ³•è¿”å›å€¼ç¼–å†™æˆvoidï¼Œæ‰§è¡Œç¨‹åºæŠ¥404çš„å¼‚å¸¸ï¼Œé»˜è®¤æŸ¥æ‰¾JSPé¡µé¢æ²¡æœ‰æ‰¾åˆ°ã€‚<br>
ã€€ã€€é»˜è®¤ä¼šè·³è½¬åˆ° @RequestMapping(&quot;/testVoid&quot;)  testVoidçš„é¡µé¢ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨è¯·æ±‚è½¬å‘æˆ–è€…é‡å®šå‘è·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢</p>
<pre><code class="language-java"> /**
     * è¿”å›å€¼æ˜¯voidï¼Œé»˜è®¤æƒ…å†µä¼šå»å¯»æ‰¾æ–¹æ³•è¯·æ±‚è·¯å¾„åçš„testVoid.jsp
     *
     * @param request response
     * @return
     */
    @RequestMapping(&quot;/testVoid&quot;)
    public void testVoid(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println(&quot;testVoidæ–¹æ³•æ‰§è¡Œäº†&quot;);
        //1ã€ç¼–å†™è¯·æ±‚è½¬å‘çš„ç¨‹åº,ä¸ä¼šç»è¿‡è§†å›¾è§£æå™¨ï¼Œè¦å°†ç›®å½•å†™å®Œæ•´
        //request.getRequestDispatcher(&quot;/WEB-INF/pages/success.jsp&quot;).forward(request,response);
        
        //2ã€é‡å®šå‘ï¼Œé‡æ–°å‘çš„æ–°è¯·æ±‚ä¸èƒ½è®¿é—®WEbâ€”INF/pagesé‡Œçš„é¡µé¢çš„
        //response.sendRedirect(request.getContextPath()+&quot;/index.jsp&quot;);
        
        //3ã€ç›´æ¥ä¼šè¿›è¡Œå“åº”ï¼Œå“åº”jsonæ•°æ®
        //è®¾ç½®è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setContentType(&quot;text/html;charset=UTF-8&quot;);
        
        response.getWriter().print(&quot;hello ä½ å¥½&quot;);
        return;//ä¸æƒ³è®©åé¢çš„ä»£ç ç»§ç»­æ‰§è¡ŒåŠ ä¸€ä¸ªreturn
    }
</code></pre>
<h4 id="3è¿”å›å€¼æ˜¯modelandviewå¯¹è±¡">(3)è¿”å›å€¼æ˜¯ModelAndViewå¯¹è±¡</h4>
<p>ModelAndViewå¯¹è±¡æ˜¯Springæä¾›çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥è°ƒæ•´å…·ä½“çš„JSPè§†å›¾</p>
<p>å…·ä½“çš„ä»£ç å¦‚ä¸‹</p>
<pre><code class="language-java">   /**
     * è¿”å›ModelAndView
     *
     * @return
     */
    @RequestMapping(&quot;/testModelAndView&quot;)
    public ModelAndView testModelAndView() {

        //åˆ›å»ºModelAndViewå¯¹è±¡
        ModelAndView mv = new ModelAndView();
        System.out.println(&quot;testModelAndViewæ–¹æ³•æ‰§è¡Œäº†&quot;);
        //æ¨¡æ‹Ÿä»æ•°æ®åº“æŸ¥è¯¢å‡ºäº†Userå¯¹è±¡
        User user = new User();
        user.setUsername(&quot;å´å½¦ç¥–&quot;);
        user.setPassword(&quot;123123&quot;);
        user.setAge(20);

        //æŠŠuserå¯¹è±¡å­˜å‚¨åˆ°mvå¯¹è±¡ä¸­ï¼Œä¹Ÿä¼šæŠŠuserå¯¹è±¡å­˜å…¥åˆ°requestå¯¹è±¡
        mv.addObject(&quot;user&quot;, user);

        //è·³è½¬åˆ°å“ªä¸ªé¡µé¢,è¿™é‡Œä¼šèµ°è§†å›¾è§£æå™¨
        mv.setViewName(&quot;success&quot;);
        return mv;
    }
</code></pre>
<p><strong>æ³¨æ„:</strong> åœ¨é¡µé¢ä¸Šä¸Šè·å–ä½¿ç”¨çš„æ˜¯ requestScope.username å–çš„ï¼Œæ‰€ä»¥è¿”å› ModelAndView ç±»å‹æ—¶ï¼Œæµ<br>
è§ˆå™¨è·³è½¬åªèƒ½æ˜¯è¯·æ±‚è½¬å‘ã€‚</p>
<h3 id="2-springmvcæ¡†æ¶æä¾›çš„è¯·æ±‚è½¬å‘å’Œé‡å®šå‘">2ã€SpringMVCæ¡†æ¶æä¾›çš„è¯·æ±‚è½¬å‘å’Œé‡å®šå‘</h3>
<p>controlleræ–¹æ³•è¿”å›Stringç±»å‹ï¼Œè¯·æ±‚è½¬å‘çš„ä»£ç å¦‚ä¸‹</p>
<pre><code class="language-java">/**
     * ä½¿ç”¨å…³é”®å­—çš„æ–¹å¼è¿›è¡Œè½¬å‘æˆ–é‡å®šå‘
     *
     * @return
     */
    @RequestMapping(&quot;/testForwardOrRedirect&quot;)
    public String testForwardOrRedirect() {
        System.out.println(&quot;testForwardOrRedirectæ–¹æ³•æ‰§è¡Œäº†&quot;);

        //1ã€è¯·æ±‚çš„è½¬å‘ï¼Œä¸ä¼šèµ°è§†å›¾è§£æå™¨ï¼Œå°†è·¯å¾„å†™å®Œæ•´
        //return &quot;forward:/WEB-INF/pages/success.jsp&quot;;

        //2ã€é‡å®šå‘ ä¸ç”¨åŠ é¡¹ç›®åï¼Œæ³¨æ„å’Œè½¬å‘ä¸åŒ
        return &quot;redirect:/index.jsp&quot;;
    }
</code></pre>
<p><strong>æ³¨æ„:</strong><br>
1ã€å¦‚æœç”¨äº† forwardï¼šåˆ™è·¯å¾„å¿…é¡»å†™æˆå®é™…è§†å›¾ urlï¼Œä¸èƒ½å†™é€»è¾‘è§†å›¾ã€‚<br>
ã€€å®ƒç›¸å½“äºâ€œrequest.getRequestDispatcher(&quot;url&quot;).forward(request,response)â€ã€‚ä½¿ç”¨è¯·æ±‚è½¬å‘ï¼Œæ—¢å¯ä»¥è½¬å‘åˆ° jspï¼Œä¹Ÿå¯ä»¥è½¬å‘åˆ°å…¶ä»–çš„æ§åˆ¶å™¨æ–¹æ³•ã€‚<br>
2ã€ä½¿ç”¨redirectï¼šå¦‚æœæ˜¯é‡å®šå‘åˆ° jsp é¡µé¢ï¼Œåˆ™ jsp é¡µé¢ä¸èƒ½å†™åœ¨ WEB-INF ç›®å½•ä¸­ï¼Œå¦åˆ™æ— æ³•æ‰¾åˆ°</p>
<h3 id="3-responsebodyå“åº”jsonæ•°æ®">3ã€ResponseBodyå“åº”jsonæ•°æ®</h3>
<p><strong>å‰è¨€:</strong> è¯¥æ³¨è§£ç”¨äºå°† Controller çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œé€šè¿‡ HttpMessageConverter æ¥å£è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼çš„<br>
æ•°æ®å¦‚ï¼šjson,xml ç­‰ï¼Œé€šè¿‡ Response å“åº”ç»™å®¢æˆ·ç«¯</p>
<p>DispatcherServlet ä¼šæ‹¦æˆªåˆ°æ‰€æœ‰çš„èµ„æºï¼Œå¯¼è‡´ä¸€ä¸ªé—®é¢˜å°±æ˜¯é™æ€èµ„æºï¼ˆimgã€cssã€jsï¼‰ä¹Ÿä¼šè¢«æ‹¦æˆªåˆ°ï¼Œä»è€Œä¸èƒ½è¢«ä½¿ç”¨ã€‚è§£å†³é—®é¢˜å°±æ˜¯éœ€è¦é…ç½®é™æ€èµ„æºä¸è¿›è¡Œæ‹¦æˆªï¼Œåœ¨ springmvc.xml é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®</p>
<h4 id="1mvcresourcesæ ‡ç­¾é…ç½®ä¸è¿‡æ»¤">(1)mvc:resourcesæ ‡ç­¾é…ç½®ä¸è¿‡æ»¤</h4>
<p>locationå…ƒç´ è¡¨ç¤ºwebappç›®å½•ä¸‹çš„åŒ…ä¸‹çš„æ‰€æœ‰æ–‡ä»¶<br>
ã€€ã€€mappingå…ƒç´ è¡¨ç¤ºä»¥/staticå¼€å¤´çš„æ‰€æœ‰è¯·æ±‚è·¯å¾„ï¼Œå¦‚/static/a æˆ–è€…/static/a/b</p>
<pre><code class="language-xml"> &lt;!--å‰ç«¯æ§åˆ¶å™¨ï¼Œé‚£äº›é™æ€èµ„æºä¸æ‹¦æˆª--&gt;
    &lt;mvc:resources location=&quot;/css/&quot; mapping=&quot;/css/**&quot;/&gt; &lt;!-- æ ·å¼ --&gt;
    &lt;mvc:resources location=&quot;/images/&quot; mapping=&quot;/images/**&quot;/&gt; &lt;!-- å›¾ç‰‡ --&gt;
    &lt;mvc:resources location=&quot;/js/&quot; mapping=&quot;/js/**&quot;/&gt; &lt;!-- javascript --&gt;
</code></pre>
<h4 id="2-ä½¿ç”¨requestbodyè·å–è¯·æ±‚ä½“æ•°æ®">(2) ä½¿ç”¨@RequestBodyè·å–è¯·æ±‚ä½“æ•°æ®</h4>
<p>jsonå­—ç¬¦ä¸²å’ŒJavaBeanå¯¹è±¡äº’ç›¸è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨jacksonçš„jaråŒ…</p>
<pre><code class="language-xml">&lt;!--jsonå­—ç¬¦ä¸²å’ŒJavaBeanå¯¹è±¡äº’ç›¸è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨jacksonçš„jaråŒ…--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
            &lt;version&gt;2.9.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
            &lt;version&gt;2.9.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;
            &lt;version&gt;2.9.0&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<p>ä½¿ç”¨@RequestBodyæ³¨è§£æŠŠjsonçš„å­—ç¬¦ä¸²è½¬æ¢æˆJavaBeançš„å¯¹è±¡</p>
<pre><code class="language-java">/**
     * æ¨¡æ‹Ÿå¼‚æ­¥å“åº”è¯·æ±‚
     * Ajaxä¼ çš„æ˜¯jsonæ•°æ®ï¼Œè·å¾—è¯·æ±‚ä½“çš„å†…å®¹ï¼Œè¯·æ±‚ä½“çš„å†…å®¹æ˜¯ä¼ çš„jsonçš„å­—ç¬¦ä¸²
     */
    @RequestMapping(&quot;/testAjax&quot;)
    public @ResponseBody User testAjax(@RequestBody User user) {
        System.out.println(&quot;testAjaxæ–¹æ³•æ‰§è¡Œäº†&quot;);
        //å®¢æˆ·ç«¯å‘é€ajaxè¯·æ±‚ï¼Œä¼ çš„æ˜¯jsonå­—ç¬¦ä¸²ï¼Œåç«¯æŠŠjsonå­—ç¬¦ä¸²å°è£…åˆ°userå¯¹è±¡ä¸­
        System.out.println(user);

        //åšå“åº”ï¼Œæ¨¡æ‹ŸæŸ¥è¯¢æ•°æ®åº“
        user.setUsername(&quot;zoick&quot;);

        //åšå“åº”,è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯å‰ç«¯è¿˜æ˜¯jsonæ•°æ®
        return user;
    }
</code></pre>
<pre><code class="language-jsp">&lt;script src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;

    &lt;script&gt;
        // é¡µé¢åŠ è½½ï¼Œç»‘å®šå•å‡»äº‹ä»¶
        $(function(){
            $(&quot;#btn&quot;).click(function(){
                // alert(&quot;hello btn&quot;);
                // å‘é€ajaxè¯·æ±‚
                $.ajax({
                    // ç¼–å†™jsonæ ¼å¼ï¼Œè®¾ç½®å±æ€§å’Œå€¼
                    url:&quot;user/testAjax&quot;,//åå°çš„è¯·æ±‚æ–¹æ³•
                    contentType:&quot;application/json;charset=UTF-8&quot;,
                    data:'{&quot;username&quot;:&quot;hehe&quot;,&quot;password&quot;:&quot;123&quot;,&quot;age&quot;:30}',//jsonæ•°æ®ï¼Œå°†ä¼šä¼ åˆ°æœåŠ¡å™¨
                    dataType:&quot;json&quot;,
                    type:&quot;post&quot;,
                    success:function(data){
                        // dataæœåŠ¡å™¨ç«¯å“åº”çš„jsonçš„æ•°æ®ï¼Œè¿›è¡Œè§£æ
                        alert(data);
                        alert(data.username);
                        alert(data.password);
                        alert(data.age);
                    }
                });

            });
        });

    &lt;/script&gt;
</code></pre>
<h2 id="äºŒ-springmvcå®ç°æ–‡ä»¶ä¸Šä¼ ">äºŒã€SpringMVCå®ç°æ–‡ä»¶ä¸Šä¼ </h2>
<h3 id="0-æ–‡ä»¶ä¸Šä¼ çš„å¿…è¦å‰æ">0ã€æ–‡ä»¶ä¸Šä¼ çš„å¿…è¦å‰æ</h3>
<pre><code class="language-xml">1ã€form è¡¨å•çš„ enctype å–å€¼å¿…é¡»æ˜¯ï¼šmultipart/form-data
           (é»˜è®¤å€¼æ˜¯:application/x-www-form-urlencoded)
           enctype:æ˜¯è¡¨å•è¯·æ±‚æ­£æ–‡çš„ç±»å‹
2ã€method å±æ€§å–å€¼å¿…é¡»æ˜¯ Post
3ã€æä¾›ä¸€ä¸ªæ–‡ä»¶é€‰æ‹©åŸŸ&lt;input type=â€fileâ€ /&gt;
</code></pre>
<h3 id="1-ä¼ ç»Ÿæ–‡ä»¶ä¸Šä¼ æ–¹å¼">1ã€ä¼ ç»Ÿæ–‡ä»¶ä¸Šä¼ æ–¹å¼</h3>
<h4 id="1å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…">(1)å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…</h4>
<pre><code class="language-xml"> &lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
      &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
      &lt;version&gt;1.3.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;commons-io&lt;/groupId&gt;
      &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
      &lt;version&gt;2.4&lt;/version&gt;
    &lt;/dependency&gt;

&lt;!--ä½¿ç”¨ Commons-fileupload ç»„ä»¶å®ç°æ–‡ä»¶ä¸Šä¼ ï¼Œéœ€è¦å¯¼å…¥è¯¥ç»„ä»¶ç›¸åº”çš„æ”¯æ’‘ jar åŒ…ï¼šCommons-fileupload å’Œcommons-ioã€‚commons-io ä¸å±äºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶çš„å¼€å‘ jar æ–‡ä»¶ï¼Œä½†Commons-fileupload ç»„ä»¶ä» 1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒå·¥ä½œæ—¶éœ€è¦ commons-io åŒ…çš„æ”¯æŒã€‚--&gt;
</code></pre>
<h4 id="2æ–‡ä»¶ä¸Šä¼ çš„jspé¡µé¢">(2)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</h4>
<pre><code class="language-jsp">&lt;h3&gt;ä¼ ç»Ÿæ–¹å¼æ–‡ä»¶ä¸Šä¼ &lt;/h3&gt;
&lt;form action=&quot;user/fileupload1&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    é€‰æ‹©æ–‡ä»¶:&lt;input type=&quot;file&quot; name=&quot;upload&quot;/&gt; &lt;br/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;

&lt;/form&gt;
</code></pre>
<h4 id="3æ–‡ä»¶ä¸Šä¼ çš„controlleræ§åˆ¶å™¨">(3)æ–‡ä»¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</h4>
<pre><code class="language-java">@RequestMapping(&quot;/fileupload1&quot;)
    public String fileupload1(HttpServletRequest request) throws Exception {
        System.out.println(&quot;æ–‡ä»¶ä¸Šä¼ ...&quot;);

        //ä½¿ç”¨fileuploadç»„ä»¶å®Œæˆæ–‡ä»¶ä¸Šä¼ 
        //ä¸Šä¼ çš„ä½ç½®
        String path = request.getSession().getServletContext().getRealPath(&quot;/uploads/&quot;);
        //åˆ¤æ–­è¯¥è·¯å¾„æ˜¯å¦å­˜åœ¨
        File file = new File(path);
        if (!file.exists()) {
            file.mkdirs();
        }

        //è§£ærequestå¯¹è±¡ï¼Œè·å–ä¸Šä¼ æ–‡ä»¶é¡¹
        DiskFileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);
        //è§£ærequest
        List&lt;FileItem&gt; items = upload.parseRequest(request);
        //éå†
        for (FileItem item : items) {
            //è¿›è¡Œåˆ¤æ–­ï¼Œå½“å‰itemå¯¹è±¡æ˜¯å¦ä¸Šä¼ æ–‡ä»¶é¡¹
            if (item.isFormField()) {
                //trueè¯´æ˜æ™®é€šè¡¨å•é¡¹
            } else {
                //è¯´æ˜ä¸Šä¼ æ–‡ä»¶é¡¹
                //è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°
                String filename = item.getName();
                //æŠŠæ–‡ä»¶åè®¾ä¸ºå”¯ä¸€å€¼ï¼Œuuid
                String uuid = UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);
                filename = filename + uuid;
                //å®Œæˆæ–‡ä»¶ä¸Šä¼ 
                item.write(new File(path, filename));
                //åˆ é™¤ä¸´æ—¶æ–‡ä»¶
                item.delete();
            }
        }

        return &quot;success&quot;;
    }
</code></pre>
<h3 id="2-springmvcæ–¹å¼æ–‡ä»¶ä¸Šä¼ ">2ã€SpringMVCæ–¹å¼æ–‡ä»¶ä¸Šä¼ </h3>
<p>SpringMVCæ¡†æ¶æä¾›äº†<strong>MultipartFileå¯¹è±¡</strong>ï¼Œè¯¥å¯¹è±¡è¡¨ç¤ºä¸Šä¼ çš„æ–‡ä»¶ï¼Œ<em><strong>è¦æ±‚å˜é‡åç§°å¿…é¡»å’Œè¡¨å•fileæ ‡ç­¾çš„nameå±æ€§åç§°ç›¸åŒã€‚</strong></em></p>
<h4 id="1åœ¨springmvcä¸­é…ç½®æ–‡ä»¶è§£æå™¨å¯¹è±¡">(1)åœ¨spring.mvcä¸­é…ç½®æ–‡ä»¶è§£æå™¨å¯¹è±¡</h4>
<pre><code class="language-xml">&lt;!--é…ç½®æ–‡ä»¶è§£æå™¨å¯¹è±¡ idå€¼æ˜¯å›ºå®šçš„--&gt;
    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;
        &lt;property name=&quot;maxUploadSizePerFile&quot; value=&quot;10485760&quot;/&gt;
    &lt;/bean&gt;
</code></pre>
<p><strong>æ³¨æ„:</strong> æ–‡ä»¶ä¸Šä¼ çš„è§£æå™¨ id æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½èµ·åˆ«çš„åç§°ï¼Œå¦åˆ™æ— æ³•å®ç°è¯·æ±‚å‚æ•°çš„ç»‘å®šã€‚ï¼ˆä¸å…‰æ˜¯æ–‡ä»¶ï¼Œå…¶ä»–å­—æ®µä¹Ÿå°†æ— æ³•ç»‘å®š</p>
<h4 id="2æ–‡ä»¶ä¸Šä¼ çš„jspé¡µé¢-2">(2)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</h4>
<pre><code class="language-jsp">&lt;h3&gt;SpringMVCæ–‡ä»¶ä¸Šä¼ &lt;/h3&gt;
&lt;form action=&quot;user/fileupload2&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    é€‰æ‹©æ–‡ä»¶:&lt;input type=&quot;file&quot; name=&quot;upload&quot;/&gt; &lt;br/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ &quot;/&gt;

&lt;/form&gt;
</code></pre>
<h4 id="3æ–‡ä»¶ç”¨springmvcæ¡†æ¶ä¸Šä¼ çš„controlleræ§åˆ¶å™¨">(3)æ–‡ä»¶ç”¨SpringMVCæ¡†æ¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</h4>
<pre><code class="language-java">@RequestMapping(&quot;/fileupload2&quot;)
    //æ³¨æ„MultipartFileä¸­å½¢å‚çš„åå­—è¦å’Œjspä¸­çš„è¡¨å•çš„åå­—ç›¸åŒ
public String fileupload2(HttpServletRequest request, MultipartFile upload) throws Exception {
        System.out.println(&quot;SpringMVCæ–‡ä»¶ä¸Šä¼ ...&quot;);

        //ä½¿ç”¨fileuploadç»„ä»¶å®Œæˆæ–‡ä»¶ä¸Šä¼ 
        //ä¸Šä¼ çš„ä½ç½®
        String path = request.getSession().getServletContext().getRealPath(&quot;/uploads/&quot;);
        //åˆ¤æ–­è¯¥è·¯å¾„æ˜¯å¦å­˜åœ¨
        File file = new File(path);
        if (!file.exists()) {
            file.mkdirs();
        }


        //è¯´æ˜ä¸Šä¼ æ–‡ä»¶é¡¹
        //è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°
        String filename = upload.getOriginalFilename();
            
        // æŠŠæ–‡ä»¶çš„åç§°è®¾ç½®å”¯ä¸€å€¼ï¼Œuuid
        String uuid = UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);
        filename = uuid+&quot;_&quot;+filename;
        //å®Œæˆæ–‡ä»¶ä¸Šä¼ 
       upload.transferTo(new File(path,filename));

        return &quot;success&quot;;
    }
</code></pre>
<h3 id="3-springmvcè·¨æœåŠ¡å™¨æ–¹å¼æ–‡ä»¶ä¸Šä¼ ">3ã€SpringMVCè·¨æœåŠ¡å™¨æ–¹å¼æ–‡ä»¶ä¸Šä¼ </h3>
<h4 id="1æ­å»ºtomcatå›¾ç‰‡æœåŠ¡å™¨">(1)æ­å»ºtomcatå›¾ç‰‡æœåŠ¡å™¨</h4>
<h4 id="2å¯¼å…¥æ‰€éœ€è¦çš„jaråŒ…">(2)å¯¼å…¥æ‰€éœ€è¦çš„jaråŒ…</h4>
<pre><code class="language-xml">&lt;!--è·¨æœåŠ¡å™¨ä¸Šä¼ éœ€è¦çš„jaråŒ…--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-core&lt;/artifactId&gt;
      &lt;version&gt;1.18.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;
      &lt;version&gt;1.18.1&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<h4 id="3æ–‡ä»¶ä¸Šä¼ çš„jspé¡µé¢">(3)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</h4>
<pre><code class="language-jsp">&lt;h3&gt;è·¨æœåŠ¡å™¨æ–‡ä»¶ä¸Šä¼ &lt;/h3&gt;
&lt;form action=&quot;user/fileupload3&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    é€‰æ‹©æ–‡ä»¶:&lt;input type=&quot;file&quot; name=&quot;upload&quot;/&gt; &lt;br/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ 3&quot;/&gt;

&lt;/form&gt;
</code></pre>
<h4 id="4æ–‡ä»¶ä¸Šä¼ çš„controlleræ§åˆ¶å™¨">(4)æ–‡ä»¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</h4>
<pre><code class="language-java">/**
     * è·¨æœåŠ¡å™¨æ–‡ä»¶ä¸Šä¼ 
     * @return
     */
    @RequestMapping(&quot;/fileupload3&quot;)
    public String fileuoload3(MultipartFile upload) throws Exception {
        System.out.println(&quot;è·¨æœåŠ¡å™¨æ–‡ä»¶ä¸Šä¼ ...&quot;);

        // å®šä¹‰ä¸Šä¼ æ–‡ä»¶æœåŠ¡å™¨è·¯å¾„
        String path = &quot;http://localhost:9090/uploads/&quot;;

        // è¯´æ˜ä¸Šä¼ æ–‡ä»¶é¡¹
        // è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§°
        String filename = upload.getOriginalFilename();
        // æŠŠæ–‡ä»¶çš„åç§°è®¾ç½®å”¯ä¸€å€¼ï¼Œuuid
        String uuid = UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);
        filename = uuid+&quot;_&quot;+filename;

        // åˆ›å»ºå®¢æˆ·ç«¯çš„å¯¹è±¡
        Client client = Client.create();

        // å’Œå›¾ç‰‡æœåŠ¡å™¨è¿›è¡Œè¿æ¥
        WebResource webResource = client.resource(path + filename);

        // ä¸Šä¼ æ–‡ä»¶
        webResource.put(upload.getBytes());

        return &quot;success&quot;;
    }

</code></pre>
<h2 id="ä¸‰-springmvcçš„å¼‚å¸¸å¤„ç†">ä¸‰ã€SpringMVCçš„å¼‚å¸¸å¤„ç†</h2>
<h3 id="1-å¼‚å¸¸å¤„ç†æ€è·¯">1ã€å¼‚å¸¸å¤„ç†æ€è·¯</h3>
<p>Controllerè°ƒç”¨serviceï¼Œserviceè°ƒç”¨daoï¼Œå¼‚å¸¸éƒ½æ˜¯å‘ä¸ŠæŠ›å‡ºçš„ï¼Œæœ€ç»ˆæœ‰DispatcherServletæ‰¾å¼‚å¸¸å¤„ç†å™¨è¿›è¡Œå¼‚å¸¸çš„å¤„ç†ã€‚</p>
<p><img src="https://ArtZoick.github.io//post-images/springmvc/exception_1.bmp" alt=""></p>
<h3 id="2-springmvcçš„å¼‚å¸¸å¤„ç†">2ã€SpringMVCçš„å¼‚å¸¸å¤„ç†</h3>
<h4 id="1è‡ªå®šä¹‰å¼‚å¸¸ç±»">(1)è‡ªå®šä¹‰å¼‚å¸¸ç±»</h4>
<pre><code class="language-java">
@Getter
@Setter
public class SysException extends Exception{

    //å­˜å‚¨æç¤ºä¿¡æ¯çš„
    private String message;


    public SysException(String message) {
        this.message = message;
    }
}

</code></pre>
<h4 id="2è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨">(2)è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨</h4>
<pre><code class="language-java">public class SysExceptionResolver implements HandlerExceptionResolver {

    /**
     * å¤„ç†å¼‚å¸¸çš„ä¸šåŠ¡é€»è¾‘
     *
     * @param httpServletRequest
     * @param httpServletResponse
     * @param o
     * @param ex
     * @return
     */
    @Override
    public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception ex) {

        //è·å–å¼‚å¸¸å¯¹è±¡
        SysException e = null;
        if (ex instanceof SysException) {
            //å¦‚æœæŠ›å‡ºçš„æ˜¯ç³»ç»Ÿè‡ªå®šä¹‰å¼‚å¸¸åˆ™ç›´æ¥è½¬æ¢
            e = (SysException) ex;
        }else {
            //å¦‚æœæŠ›å‡ºçš„ä¸æ˜¯ç³»ç»Ÿè‡ªå®šä¹‰å¼‚å¸¸åˆ™é‡æ–°æ„é€ ä¸€ä¸ªç³»ç»Ÿé”™è¯¯å¼‚å¸¸
            e = new SysException(&quot;ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤...&quot;);
        }

        //åˆ›å»ºModelAndViewå¯¹è±¡
        ModelAndView mv = new ModelAndView();
        mv.addObject(&quot;errorMsg&quot;,e.getMessage());
        mv.setViewName(&quot;error&quot;);
        return mv;
    }
}
</code></pre>
<h4 id="3åœ¨springmvcä¸­é…ç½®å¼‚å¸¸å¤„ç†å™¨">(3)åœ¨spring.mvcä¸­é…ç½®å¼‚å¸¸å¤„ç†å™¨</h4>
<pre><code class="language-xml">&lt;!--é…ç½®å¼‚å¸¸å¤„ç†å™¨--&gt;
&lt;bean id=&quot;sysException&quot; class=&quot;top.zoick.exception.SysExceptionResolver&quot;/&gt;
</code></pre>
<h2 id="å››-springmvcæ¡†æ¶ä¸­çš„æ‹¦æˆªå™¨">å››ã€SpringMVCæ¡†æ¶ä¸­çš„æ‹¦æˆªå™¨</h2>
<h3 id="1-æ‹¦æˆªå™¨çš„æ¦‚è¿°">1ã€æ‹¦æˆªå™¨çš„æ¦‚è¿°</h3>
<p>1ã€SpringMVCæ¡†æ¶ä¸­çš„æ‹¦æˆªå™¨ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†çš„æŠ€æœ¯ã€‚</p>
<p>2ã€å¯ä»¥å®šä¹‰æ‹¦æˆªå™¨é“¾ï¼Œè¿æ¥å™¨é“¾å°±æ˜¯å°†æ‹¦æˆªå™¨æŒ‰ç€ä¸€å®šçš„é¡ºåºç»“æˆä¸€æ¡é“¾ï¼Œåœ¨è®¿é—®è¢«æ‹¦æˆªçš„æ–¹æ³•æ—¶ï¼Œæ‹¦æˆªå™¨é“¾<br>
ä¸­çš„æ‹¦æˆªå™¨ä¼šæŒ‰ç€å®šä¹‰çš„é¡ºåºæ‰§è¡Œã€‚</p>
<p>3ã€æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŠŸèƒ½æ¯”è¾ƒç±»ä¼¼ï¼Œæœ‰åŒºåˆ«</p>
<p><strong>è¿‡æ»¤å™¨</strong>æ˜¯Servletè§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•æ¡†æ¶éƒ½å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨æŠ€æœ¯ã€‚<br>
ã€€ã€€<strong>æ‹¦æˆªå™¨</strong>æ˜¯SpringMVCæ¡†æ¶ç‹¬æœ‰çš„ã€‚<br>
ã€€ã€€<strong>è¿‡æ»¤å™¨</strong>é…ç½®äº†/*ï¼Œå¯ä»¥æ‹¦æˆªä»»ä½•èµ„æºã€‚<br>
ã€€ã€€<strong>æ‹¦æˆªå™¨</strong>åªä¼šå¯¹æ§åˆ¶å™¨ä¸­çš„æ–¹æ³•è¿›è¡Œæ‹¦æˆªã€‚</p>
<p>4ã€æ‹¦æˆªå™¨ä¹Ÿæ˜¯AOPæ€æƒ³çš„ä¸€ç§å®ç°æ–¹å¼</p>
<p>5ã€æƒ³è¦è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œéœ€è¦å®ç°HandlerInterceptoræ¥å£ã€‚</p>
<h3 id="2-è‡ªå®šä¹‰æ‹¦æˆªå™¨æ­¥éª¤">2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨æ­¥éª¤</h3>
<h4 id="1åˆ›å»ºç±»å®ç°handlerinterceptoræ¥å£é‡å†™éœ€è¦çš„æ–¹æ³•">(1)åˆ›å»ºç±»ï¼Œå®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™éœ€è¦çš„æ–¹æ³•</h4>
<pre><code class="language-java">public class MyInterceptor1 implements HandlerInterceptor {
    /**
     * é¢„å¤„ç†ï¼Œcontrolleræ–¹æ³•æ‰§è¡Œå‰ï¼Œå®é™…å¼€å‘åœºæ™¯ï¼šç™»å½•é¡µé¢æ˜¯å¦ç™»å½•çš„é€»è¾‘åˆ¤æ–­
     * return true æ”¾è¡Œï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰§è¡Œcontrollerä¸­çš„æ–¹æ³•
     * return false ä¸æ”¾è¡Œ
     * @param request
     * @param response
     * @param handler
     * @return
     * @throws Exception
     */
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        System.out.println(&quot;MyInterceptor1æ‰§è¡Œäº†......å‰111&quot;);
        //request.getRequestDispatcher(&quot;/WEB-INF/pages/error.jsp&quot;).forward(request,response);

        return true;
    }

    /**
     * åå¤„ç†æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ‰§è¡Œä¸controlleræ–¹æ³•æ‰§è¡Œåï¼Œsuccess.jspæ‰§è¡Œå‰
     * å¯ç”¨æ¥é‡Šæ”¾èµ„æºï¼Œå…³é—­æµ
     * @param request
     * @param response
     * @param handler
     * @param modelAndView
     * @throws Exception
     */
    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        System.out.println(&quot;MyInterceptor1æ‰§è¡Œäº†......å111&quot;);
        //request.getRequestDispatcher(&quot;/WEB-INF/pages/error.jsp&quot;).forward(request,response);

    }

    /**
     * success.jspæ–¹æ³•æ‰§è¡Œåï¼Œè¯¥æ–¹æ³•ä¼šæ‰§è¡Œ
     * @param request
     * @param response
     * @param handler
     * @param ex
     * @throws Exception
     */
    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        System.out.println(&quot;MyInterceptor1æ‰§è¡Œäº†......æœ€å111&quot;);
    }
}

</code></pre>
<h4 id="2åœ¨springmvcxmlä¸­é…ç½®å¤šä¸ªæ‹¦æˆªå™¨ç±»">(2)åœ¨springmvc.xmlä¸­é…ç½®å¤šä¸ªæ‹¦æˆªå™¨ç±»</h4>
<pre><code class="language-xml">&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;
    &lt;mvc:interceptors&gt;
        &lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;
        &lt;mvc:interceptor&gt;
            &lt;!--è¦æ‹¦æˆªçš„å…·ä½“æ–¹æ³•--&gt;
            &lt;mvc:mapping path=&quot;/user/*&quot;/&gt;
            &lt;!--é…ç½®æ‹¦æˆªå™¨å¯¹è±¡--&gt;
            &lt;bean class=&quot;top.zoick.interceptor.MyInterceptor1&quot;/&gt;
        &lt;/mvc:interceptor&gt;

        &lt;!--é…ç½®ç¬¬äºŒä¸ªæ‹¦æˆªå™¨--&gt;
        &lt;mvc:interceptor&gt;
            &lt;!--è¦æ‹¦æˆªçš„å…·ä½“æ–¹æ³•--&gt;
            &lt;mvc:mapping path=&quot;/**&quot;/&gt;
            &lt;!--é…ç½®æ‹¦æˆªå™¨å¯¹è±¡--&gt;
            &lt;bean class=&quot;top.zoick.interceptor.MyInterceptor2&quot;/&gt;
        &lt;/mvc:interceptor&gt;

    &lt;/mvc:interceptors&gt;
</code></pre>
<h4 id="3å¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œæµç¨‹">(3)å¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œæµç¨‹</h4>
<p><img src="https://ArtZoick.github.io//post-images/springmvc/interceptor_1.bmp" alt=""></p>
<h3 id="3-handlerinterceptoræ¥å£ä¸­çš„æ–¹æ³•">3ã€HandlerInterceptoræ¥å£ä¸­çš„æ–¹æ³•</h3>
<h4 id="1prehandleæ–¹æ³•æ˜¯controlleræ–¹æ³•æ‰§è¡Œå‰æ‹¦æˆªçš„æ–¹æ³•">(1)preHandleæ–¹æ³•æ˜¯controlleræ–¹æ³•æ‰§è¡Œå‰æ‹¦æˆªçš„æ–¹æ³•</h4>
<p>å¯ä»¥ä½¿ç”¨requestæˆ–è€…responseè·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢<br>
return trueæ”¾è¡Œï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå¦‚æœæ²¡æœ‰æ‹¦æˆªå™¨ï¼Œæ‰§è¡Œcontrollerä¸­çš„æ–¹æ³•ã€‚<br>
return falseä¸æ”¾è¡Œï¼Œä¸ä¼šæ‰§è¡Œcontrollerä¸­çš„æ–¹æ³•ã€‚</p>
<h4 id="2posthandleæ˜¯controlleræ–¹æ³•æ‰§è¡Œåæ‰§è¡Œçš„æ–¹æ³•åœ¨jspè§†å›¾æ‰§è¡Œå‰">(2)postHandleæ˜¯controlleræ–¹æ³•æ‰§è¡Œåæ‰§è¡Œçš„æ–¹æ³•ï¼Œåœ¨JSPè§†å›¾æ‰§è¡Œå‰ã€‚</h4>
<p>å¯ä»¥ä½¿ç”¨requestæˆ–è€…responseè·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢<br>
å¦‚æœæŒ‡å®šäº†è·³è½¬çš„é¡µé¢ï¼Œé‚£ä¹ˆcontrolleræ–¹æ³•è·³è½¬çš„é¡µé¢å°†ä¸ä¼šæ˜¾ç¤ºã€‚</p>
<h4 id="3posthandleæ–¹æ³•æ˜¯åœ¨jspæ‰§è¡Œåæ‰§è¡Œ">(3)postHandleæ–¹æ³•æ˜¯åœ¨JSPæ‰§è¡Œåæ‰§è¡Œ</h4>
<p>requestæˆ–è€…responseä¸èƒ½å†è·³è½¬é¡µé¢äº†</p>
<hr>
<p>æºç :<a href="https://github.com/ArtZoick/MyBatis">ç‚¹ğŸ”è¿™é‡Œ</a></p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%80-%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%92%8C%E7%BB%93%E6%9E%9C%E8%A7%86%E5%9B%BE">ä¸€ã€å“åº”æ•°æ®å’Œç»“æœè§†å›¾</a>
<ul>
<li><a href="#1-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%88%86%E7%B1%BB">1ã€è¿”å›å€¼åˆ†ç±»</a>
<ul>
<li><a href="#1%E8%BF%94%E5%9B%9E%E5%AD%97%E7%AC%A6%E4%B8%B2">(1)è¿”å›å­—ç¬¦ä¸²</a></li>
<li><a href="#2%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AFvoid">(2)è¿”å›å€¼æ˜¯void</a></li>
<li><a href="#3%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AFmodelandview%E5%AF%B9%E8%B1%A1">(3)è¿”å›å€¼æ˜¯ModelAndViewå¯¹è±¡</a></li>
</ul>
</li>
<li><a href="#2-springmvc%E6%A1%86%E6%9E%B6%E6%8F%90%E4%BE%9B%E7%9A%84%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91">2ã€SpringMVCæ¡†æ¶æä¾›çš„è¯·æ±‚è½¬å‘å’Œé‡å®šå‘</a></li>
<li><a href="#3-responsebody%E5%93%8D%E5%BA%94json%E6%95%B0%E6%8D%AE">3ã€ResponseBodyå“åº”jsonæ•°æ®</a>
<ul>
<li><a href="#1mvcresources%E6%A0%87%E7%AD%BE%E9%85%8D%E7%BD%AE%E4%B8%8D%E8%BF%87%E6%BB%A4">(1)mvc:resourcesæ ‡ç­¾é…ç½®ä¸è¿‡æ»¤</a></li>
<li><a href="#2-%E4%BD%BF%E7%94%A8requestbody%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AE">(2) ä½¿ç”¨@RequestBodyè·å–è¯·æ±‚ä½“æ•°æ®</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%8C-springmvc%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">äºŒã€SpringMVCå®ç°æ–‡ä»¶ä¸Šä¼ </a>
<ul>
<li><a href="#0-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%BF%85%E8%A6%81%E5%89%8D%E6%8F%90">0ã€æ–‡ä»¶ä¸Šä¼ çš„å¿…è¦å‰æ</a></li>
<li><a href="#1-%E4%BC%A0%E7%BB%9F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%96%B9%E5%BC%8F">1ã€ä¼ ç»Ÿæ–‡ä»¶ä¸Šä¼ æ–¹å¼</a>
<ul>
<li><a href="#1%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84jar%E5%8C%85">(1)å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…</a></li>
<li><a href="#2%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84jsp%E9%A1%B5%E9%9D%A2">(2)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</a></li>
<li><a href="#3%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84controller%E6%8E%A7%E5%88%B6%E5%99%A8">(3)æ–‡ä»¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</a></li>
</ul>
</li>
<li><a href="#2-springmvc%E6%96%B9%E5%BC%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">2ã€SpringMVCæ–¹å¼æ–‡ä»¶ä¸Šä¼ </a>
<ul>
<li><a href="#1%E5%9C%A8springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E5%99%A8%E5%AF%B9%E8%B1%A1">(1)åœ¨spring.mvcä¸­é…ç½®æ–‡ä»¶è§£æå™¨å¯¹è±¡</a></li>
<li><a href="#2%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84jsp%E9%A1%B5%E9%9D%A2-2">(2)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</a></li>
<li><a href="#3%E6%96%87%E4%BB%B6%E7%94%A8springmvc%E6%A1%86%E6%9E%B6%E4%B8%8A%E4%BC%A0%E7%9A%84controller%E6%8E%A7%E5%88%B6%E5%99%A8">(3)æ–‡ä»¶ç”¨SpringMVCæ¡†æ¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</a></li>
</ul>
</li>
<li><a href="#3-springmvc%E8%B7%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">3ã€SpringMVCè·¨æœåŠ¡å™¨æ–¹å¼æ–‡ä»¶ä¸Šä¼ </a>
<ul>
<li><a href="#1%E6%90%AD%E5%BB%BAtomcat%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8">(1)æ­å»ºtomcatå›¾ç‰‡æœåŠ¡å™¨</a></li>
<li><a href="#2%E5%AF%BC%E5%85%A5%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84jar%E5%8C%85">(2)å¯¼å…¥æ‰€éœ€è¦çš„jaråŒ…</a></li>
<li><a href="#3%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84jsp%E9%A1%B5%E9%9D%A2">(3)æ–‡ä»¶ä¸Šä¼ çš„JSPé¡µé¢</a></li>
<li><a href="#4%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84controller%E6%8E%A7%E5%88%B6%E5%99%A8">(4)æ–‡ä»¶ä¸Šä¼ çš„Controlleræ§åˆ¶å™¨</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%B8%89-springmvc%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">ä¸‰ã€SpringMVCçš„å¼‚å¸¸å¤„ç†</a>
<ul>
<li><a href="#1-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%80%9D%E8%B7%AF">1ã€å¼‚å¸¸å¤„ç†æ€è·¯</a></li>
<li><a href="#2-springmvc%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">2ã€SpringMVCçš„å¼‚å¸¸å¤„ç†</a>
<ul>
<li><a href="#1%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB">(1)è‡ªå®šä¹‰å¼‚å¸¸ç±»</a></li>
<li><a href="#2%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8">(2)è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨</a></li>
<li><a href="#3%E5%9C%A8springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8">(3)åœ¨spring.mvcä¸­é…ç½®å¼‚å¸¸å¤„ç†å™¨</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%9B%9B-springmvc%E6%A1%86%E6%9E%B6%E4%B8%AD%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8">å››ã€SpringMVCæ¡†æ¶ä¸­çš„æ‹¦æˆªå™¨</a>
<ul>
<li><a href="#1-%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%A6%82%E8%BF%B0">1ã€æ‹¦æˆªå™¨çš„æ¦‚è¿°</a></li>
<li><a href="#2-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E6%AD%A5%E9%AA%A4">2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨æ­¥éª¤</a>
<ul>
<li><a href="#1%E5%88%9B%E5%BB%BA%E7%B1%BB%E5%AE%9E%E7%8E%B0handlerinterceptor%E6%8E%A5%E5%8F%A3%E9%87%8D%E5%86%99%E9%9C%80%E8%A6%81%E7%9A%84%E6%96%B9%E6%B3%95">(1)åˆ›å»ºç±»ï¼Œå®ç°HandlerInterceptoræ¥å£ï¼Œé‡å†™éœ€è¦çš„æ–¹æ³•</a></li>
<li><a href="#2%E5%9C%A8springmvcxml%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8%E7%B1%BB">(2)åœ¨springmvc.xmlä¸­é…ç½®å¤šä¸ªæ‹¦æˆªå™¨ç±»</a></li>
<li><a href="#3%E5%A4%9A%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B">(3)å¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œæµç¨‹</a></li>
</ul>
</li>
<li><a href="#3-handlerinterceptor%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95">3ã€HandlerInterceptoræ¥å£ä¸­çš„æ–¹æ³•</a>
<ul>
<li><a href="#1prehandle%E6%96%B9%E6%B3%95%E6%98%AFcontroller%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E5%89%8D%E6%8B%A6%E6%88%AA%E7%9A%84%E6%96%B9%E6%B3%95">(1)preHandleæ–¹æ³•æ˜¯controlleræ–¹æ³•æ‰§è¡Œå‰æ‹¦æˆªçš„æ–¹æ³•</a></li>
<li><a href="#2posthandle%E6%98%AFcontroller%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E5%90%8E%E6%89%A7%E8%A1%8C%E7%9A%84%E6%96%B9%E6%B3%95%E5%9C%A8jsp%E8%A7%86%E5%9B%BE%E6%89%A7%E8%A1%8C%E5%89%8D">(2)postHandleæ˜¯controlleræ–¹æ³•æ‰§è¡Œåæ‰§è¡Œçš„æ–¹æ³•ï¼Œåœ¨JSPè§†å›¾æ‰§è¡Œå‰ã€‚</a></li>
<li><a href="#3posthandle%E6%96%B9%E6%B3%95%E6%98%AF%E5%9C%A8jsp%E6%89%A7%E8%A1%8C%E5%90%8E%E6%89%A7%E8%A1%8C">(3)postHandleæ–¹æ³•æ˜¯åœ¨JSPæ‰§è¡Œåæ‰§è¡Œ</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://ArtZoick.github.io//post/springmvc_1">
              <h3 class="post-title">
                SpringMVC_1 å…¥é—¨ã€å‚æ•°ç»‘å®šã€å¸¸ç”¨æ³¨è§£
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'a2471d09bddb5be481ee',
    clientSecret: '05d427fb27f873cfabace27b9f042f2c7f23000f',
    repo: 'ArtZoick.github.io',
    owner: 'ArtZoick',
    admin: ['ArtZoick'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  <a href="https://zhidao.baidu.com/question/1867120235416383707.html" target="_blank" onclick="alert('ç›²ç”Ÿï¼Œä½ å‘ç°äº†åç‚¹ï¼');">å­¦ä¹ å¼ºå›½</a>

<!--Tidoå¯¹è¯æ’ä»¶-->
<script src="//code.tidio.co/5fh6jaqvluqj8jjuf5zlqrf5tlzpktnx.js"></script>
<style>
.text-popup {
Â  Â  animation: textPopup 1s;
Â  Â  color: red;
Â  Â  user-select: none;
Â  Â  white-space: nowrap;
Â  Â  position: absolute;
Â  Â  z-index: 99;
}
@keyframes textPopup {
Â  Â  0%, 100% {
Â  Â Â  Â Â Â opacity: 0;
Â  Â  }
Â  Â  5% {
Â  Â Â  Â Â Â opacity: 1;
Â  Â  }
Â  Â  100% {
Â  Â Â  Â Â Â transform: translateY(-50px);Â  Â  
Â  Â  }
}
</style>
<script type="text/javascript" src="https://cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js">
!function(){function n(n,e,t){return n.getAttribute(e)||t}function e(n){return document.getElementsByTagName(n)}
function t(){var t=e("script"),o=t.length,i=t[o-1];return{l:o,z:n(i,"zIndex",-1),o:n(i,"opacity",.5),c:n(i,"color","0,0,0")
,n:n(i,"count",99)}}function o(){a=m.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidt
h,c=m.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function i(){r.clearRect
(0,0,a,c);var n,e,t,o,m,l;s.forEach(function(i,x){for(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x>a||i.x<0?-1:1,i.ya*=i.y>c||i.y<0?-1:1,r.
fillRect(i.x-.5,i.y-.5,1,1),e=x+1;e<u.length;e++)n=u[e],null!==n.x&&null!==n.y&&(o=i.x-n.x,m=i.y-n.y,l=o*o+m*m,l<n.max&&(n===
y&&l>=n.max/2&&(i.x-=.03*o,i.y-=.03*m),t=(n.max-l)/n.max,r.beginPath(),r.lineWidth=t/2,r.strokeStyle="rgba("+d.c+","+(t+.2)+")
",r.moveTo(i.x,i.y),r.lineTo(n.x,n.y),r.stroke()))}),x(i)}var a,c,u,m=document.createElement("canvas"),d=t(),l="c_n"+d.l,r=m.
getContext("2d"),x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.
oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/45)},w=Math.random,y={x:null,y:nul
l,max:2e4};m.id=l,m.style.cssText="position:fixed;top:0;left:0;z-index:"+d.z+";opacity:"+d.o,e("body")[0].appendChild(m),o(),
window.Î¿nresize=o,window.Î¿nmÎ¿usemÎ¿ve=function(n){n=n||window.event,y.x=n.clientX,y.y=n.clientY},window.Î¿nmÎ¿useÎ¿ut=function(){y
.x=null,y.y=null};for(var s=[],f=0;d.n>f;f++){var h=w()*a,g=w()*c,v=2*w()-1,p=2*w()-1;s.push({x:h,y:g,xa:v,ya:p,max:6e3})}u=
s.concat([y]),setTimeout(function(){i()},100)}();
</script>

<!--é¼ æ ‡ç‚¹å‡»-->
<script language=â€javascriptâ€ type=â€text/javascriptâ€ src=â€https://cdn.staticfile.org/jquery/1.7.2/jquery.min.jsâ€></script>
<script type="text/javascript">
$(document).ready(function(){
    var a_index = 0;
    $("body").click(function(e){
        var a = new Array("å¯Œå¼º", "æ°‘ä¸»", "æ–‡æ˜", "å’Œè°", "è‡ªç”±", "å¹³ç­‰", "å…¬æ­£" ,"æ³•æ²»", "çˆ±å›½", "æ•¬ä¸š", "è¯šä¿¡", "å‹å–„");
        var $i = $("<span/>").text(a[a_index]);
        a_index = (a_index + 1) % a.length;
        var x = e.pageX,y = e.pageY;
        $i.css({
            "z-index": 99999,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": "#ff6651"
        });
        $("body").append($i);
        $i.animate({"top": y-180,"opacity": 0},1500,function() {
            $i.remove();
        });
    });
});
</script> | 
  <a class="rss" href="https://ArtZoick.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
